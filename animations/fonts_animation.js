const getBlockFont = () => {
  return {
    A: [
      "  ###  ",
      " ## ## ",
      "##   ##",
      "#######",
      "##   ##",
      "##   ##",
      "##   ##",
    ],
    B: [
      "###### ",
      "##   ##",
      "##   ##",
      "###### ",
      "##   ##",
      "##   ##",
      "###### ",
    ],
    C: [
      " ##### ",
      "##   ##",
      "##     ",
      "##     ",
      "##     ",
      "##   ##",
      " ##### ",
    ],
    D: [
      "###### ",
      "##   ##",
      "##   ##",
      "##   ##",
      "##   ##",
      "##   ##",
      "###### ",
    ],
    E: [
      "#######",
      "##     ",
      "##     ",
      "#####  ",
      "##     ",
      "##     ",
      "#######",
    ],
    F: [
      "#######",
      "##     ",
      "##     ",
      "#####  ",
      "##     ",
      "##     ",
      "##     ",
    ],
    G: [
      " ##### ",
      "##   ##",
      "##     ",
      "##  ###",
      "##   ##",
      "##   ##",
      " ##### ",
    ],
    H: [
      "##   ##",
      "##   ##",
      "##   ##",
      "#######",
      "##   ##",
      "##   ##",
      "##   ##",
    ],
    I: [
      "#######",
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "#######",
    ],
    J: [
      "#######",
      "    ## ",
      "    ## ",
      "    ## ",
      "##  ## ",
      "##  ## ",
      " ####  ",
    ],
    K: [
      "##   ##",
      "##  ## ",
      "## ##  ",
      "####   ",
      "## ##  ",
      "##  ## ",
      "##   ##",
    ],
    L: [
      "##     ",
      "##     ",
      "##     ",
      "##     ",
      "##     ",
      "##     ",
      "#######",
    ],
    M: [
      "##   ##",
      "### ###",
      "#######",
      "## # ##",
      "##   ##",
      "##   ##",
      "##   ##",
    ],
    N: [
      "##   ##",
      "###  ##",
      "#### ##",
      "## ####",
      "##  ###",
      "##   ##",
      "##   ##",
    ],
    O: [
      " ##### ",
      "##   ##",
      "##   ##",
      "##   ##",
      "##   ##",
      "##   ##",
      " ##### ",
    ],
    P: [
      "###### ",
      "##   ##",
      "##   ##",
      "###### ",
      "##     ",
      "##     ",
      "##     ",
    ],
    Q: [
      " ##### ",
      "##   ##",
      "##   ##",
      "##   ##",
      "## # ##",
      "##  ## ",
      " #### #",
    ],
    R: [
      "###### ",
      "##   ##",
      "##   ##",
      "###### ",
      "## ##  ",
      "##  ## ",
      "##   ##",
    ],
    S: [
      " ##### ",
      "##   ##",
      "##     ",
      " ##### ",
      "     ##",
      "##   ##",
      " ##### ",
    ],
    T: [
      "#######",
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "  ###  ",
    ],
    U: [
      "##   ##",
      "##   ##",
      "##   ##",
      "##   ##",
      "##   ##",
      "##   ##",
      " ##### ",
    ],
    V: [
      "##   ##",
      "##   ##",
      "##   ##",
      "##   ##",
      "##   ##",
      " ## ## ",
      "  ###  ",
    ],
    W: [
      "##   ##",
      "##   ##",
      "##   ##",
      "## # ##",
      "#######",
      "### ###",
      "##   ##",
    ],
    X: [
      "##   ##",
      "##   ##",
      " ## ## ",
      "  ###  ",
      " ## ## ",
      "##   ##",
      "##   ##",
    ],
    Y: [
      "##   ##",
      "##   ##",
      " ## ## ",
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "  ###  ",
    ],
    Z: [
      "#######",
      "     ##",
      "    ## ",
      "  ##   ",
      " ##    ",
      "##     ",
      "#######",
    ],
    " ": [
      "       ",
      "       ",
      "       ",
      "       ",
      "       ",
      "       ",
      "       ",
    ],
    "!": [
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "       ",
      "  ###  ",
    ],
    ".": [
      "       ",
      "       ",
      "       ",
      "       ",
      "       ",
      "       ",
      "  ###  ",
    ],
    ",": [
      "       ",
      "       ",
      "       ",
      "       ",
      "       ",
      "  ###  ",
      " ###   ",
    ],
    "?": [
      " ##### ",
      "##   ##",
      "     ##",
      "   ### ",
      "  ###  ",
      "       ",
      "  ###  ",
    ],
    0: [
      " ##### ",
      "##   ##",
      "##  ###",
      "## # ##",
      "###  ##",
      "##   ##",
      " ##### ",
    ],
    1: [
      "  ###  ",
      " ####  ",
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "  ###  ",
      "#######",
    ],
    2: [
      " ##### ",
      "##   ##",
      "     ##",
      "   ### ",
      " ###   ",
      "##     ",
      "#######",
    ],
    3: [
      " ##### ",
      "##   ##",
      "     ##",
      "  #### ",
      "     ##",
      "##   ##",
      " ##### ",
    ],
    4: [
      "   ### ",
      "  #### ",
      " ## ## ",
      "##  ## ",
      "#######",
      "    ## ",
      "    ## ",
    ],
    5: [
      "#######",
      "##     ",
      "###### ",
      "     ##",
      "     ##",
      "##   ##",
      " ##### ",
    ],
    6: [
      " ##### ",
      "##   ##",
      "##     ",
      "###### ",
      "##   ##",
      "##   ##",
      " ##### ",
    ],
    7: [
      "#######",
      "     ##",
      "    ## ",
      "   ##  ",
      "  ##   ",
      " ##    ",
      "##     ",
    ],
    8: [
      " ##### ",
      "##   ##",
      "##   ##",
      " ##### ",
      "##   ##",
      "##   ##",
      " ##### ",
    ],
    9: [
      " ##### ",
      "##   ##",
      "##   ##",
      " ######",
      "     ##",
      "##   ##",
      " ##### ",
    ],
  };
};

const getSimpleFont = () => {
  return {
    A: [" /\\ ", "/--\\", "|  |"],
    B: ["|-\\ ", "|-< ", "|_/ "],
    C: [" /--", "|   ", " \\__"],
    D: ["|--\\", "|  |", "|__/"],
    E: ["|---", "|-- ", "|___"],
    F: ["|---", "|-- ", "|   "],
    G: [" /--", "| _|", " \\__"],
    H: ["|  |", "|--|", "|  |"],
    I: ["---", " | ", "___"],
    J: ["   |", "   |", "\\__/"],
    K: ["| /", "|< ", "| \\"],
    L: ["|   ", "|   ", "|___"],
    M: ["|\\  /|", "| \\/ |", "|    |"],
    N: ["|\\  |", "| \\ |", "|  \\|"],
    O: [" /--\\", "|    |", " \\__/ "],
    P: ["|--\\", "|__/", "|   "],
    Q: [" /--\\", "|    |", " \\_\\_/"],
    R: ["|--\\", "|__/", "|  \\"],
    S: [" /--", " \\_ ", "___/"],
    T: ["---", " | ", " | "],
    U: ["|  |", "|  |", " \\__/"],
    V: ["\\    /", " \\  / ", "  \\/  "],
    W: ["|     |", "|  ^  |", " \\/ \\/ "],
    X: ["\\ /", " X ", "/ \\"],
    Y: ["\\ /", " Y ", " | "],
    Z: ["---/", " /- ", "/___"],
    " ": ["   ", "   ", "   "],
    "!": [" | ", " | ", " o "],
    ".": ["   ", "   ", " o "],
    ",": ["   ", "   ", " , "],
    "?": [" ? ", "   ", " o "],
    0: [" /--\\", "|    |", " \\__/ "],
    1: [" /|", "  |", " _|_"],
    2: [" /--\\", "  /- ", " /___"],
    3: ["---\\", " --<", "___/"],
    4: ["|  |", "|__|", "   |"],
    5: ["|---", " --\\", "___/"],
    6: [" /--", "|-- ", " \\__"],
    7: ["---/", "  / ", " /  "],
    8: [" /--\\", " >--<", " \\__/"],
    9: [" /--\\", " \\__|", "    |"],
  };
};

const black = (text) => {
  return "\x1B[30m" + text + "\x1B[0m";
};

const red = (text) => {
  return "\x1B[31m" + text + "\x1B[0m";
};

const green = (text) => {
  return "\x1B[32m" + text + "\x1B[0m";
};

const yellow = (text) => {
  return "\x1B[33m" + text + "\x1B[0m";
};

const blue = (text) => {
  return "\x1B[34m" + text + "\x1B[0m";
};

const magenta = (text) => {
  return "\x1B[35m" + text + "\x1B[0m";
};

const cyan = (text) => {
  return "\x1B[36m" + text + "\x1B[0m";
};

function white(text) {
  return "\x1B[37m" + text + "\x1B[0m";
}

function bold(text) {
  return "\x1B[1m" + text + "\x1B[0m";
}

const textToAsciiArt = (text, font) => {
  const characters = font;
  const height = characters[0].length;

  const result = [];
  for (let i = 0; i < height; i++) {
    result.push("");
  }

  const char = text.toUpperCase();
  const charLines = char in characters ? characters[char] : characters["?"];

  for (let line = 0; line < height; line++) {
    result[line] += charLines[line].padStart(10);
  }

  return result;
};

const printOnScreen = (chars) => {
  const colorFns = [black, red, green, yellow, blue, magenta, cyan, white];
  const linesPerChar = chars[0].length;
  let result = "";
  let line = 0;

  setInterval(() => {
    const randomColorIndex = Math.floor(Math.random() * colorFns.length);
    console.clear();

    if (line >= linesPerChar) {
      line = 0;
      result = "";
      console.clear();
    }

    let combinedLine = "";
    for (let index = 0; index < chars.length; index++) {
      combinedLine += bold(colorFns[randomColorIndex](chars[index][line][0]));
    }

    result += combinedLine + "\n";
    console.log(result);

    line++;
  }, 500);
};

const main = (args) => {
  const text = args[0] || "Hello!";
  const fontName = (args[1] || "block").toLowerCase();

  const selectedFont = fontName === "simple" ? getSimpleFont() : getBlockFont();

  console.clear();

  const str = [];
  for (const char of text) {
    const line = [];
    const asciiArt = textToAsciiArt(char, selectedFont);
    for (let i = 0; i < asciiArt.length; i++) {
      line.push([asciiArt[i]]);
    }
    str.push(line);
  }

  printOnScreen(str);
};

main(Deno.args);
